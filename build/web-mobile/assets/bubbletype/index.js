window.__require=function e(t,o,i){function n(l,s){if(!o[l]){if(!t[l]){var a=l.split("/");if(a=a[a.length-1],!t[a]){var c="function"==typeof __require&&__require;if(!s&&c)return c(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+l+"'")}l=a}var d=o[l]={exports:{}};t[l][0].call(d.exports,function(e){return n(t[l][1][e]||e)},d,d.exports,e,t,o,i)}return o[l].exports}for(var r="function"==typeof __require&&__require,l=0;l<i.length;l++)n(i[l]);return n}({bubbletype:[function(e,t,o){"use strict";cc._RF.push(t,"20136wzERpIRK5KrH31nDor","bubbletype");var i=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function i(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,l=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(l=(r<3?n(l):r>3?n(t,o,l):n(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};Object.defineProperty(o,"__esModule",{value:!0}),o.GAME_SOUND=void 0;var r=cc._decorator,l=r.ccclass,s=r.property,a=e("../../../common/scripts/lib/error-handler"),c=e("../../../common/scripts/lib/config"),d=e("../../../common/scripts/util");o.GAME_SOUND="games/starfall/sound/";var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.bubblePrefab=null,t.buttonPrefab=null,t.friendPos=null,t.fallingTime=30,t.inputBoxString="",t.correctAudio=null,t.popAudio=null,t.wrongAudio=null,t.words=[],t.wordsOnScreen=["","",""],t.score=0,t.maxScore=0,t.isScenePoped=!1,t.isFirstPageKeys=!0,t.bubbledestroyBoundry=520,t._sound=null,t.friend=null,t}return i(t,e),t.prototype.onLoad=function(){this.alphabets=JSON.stringify(this.processConfiguration(c.default.getInstance().data[0]).numberpads[0]).replace(new RegExp(/"/g),"");var e=c.default.getInstance().data[0],t=e[5]+"";this.words=t.split(" "),this.maxScore=parseInt(e[3]),this.startGame(),this.node.getChildByName("score").getComponent(cc.Label).string=this.score+"/"+this.maxScore,this.createDog()},t.prototype.startGame=function(){c.default.i.direction==c.Direction.RTL&&(this.node.getChildByName("score").position=new cc.Vec2(-415,107),this.bubbledestroyBoundry=-520);for(var e=0;e<3;e++){var t=cc.instantiate(this.bubblePrefab),o=250*Math.random()+100,i=cc.moveTo(this.fallingTime*(e/3+1),this.bubbledestroyBoundry,o);t.position=new cc.Vec2(e/3*-500-500,o),c.default.i.direction==c.Direction.RTL&&(i=cc.moveTo(this.fallingTime*(e/3+1),this.bubbledestroyBoundry,o),t.position=new cc.Vec2(500+e/3*500,o)),t.name=(e+1).toString();var n=Math.floor(Math.random()*(this.words.length-0))+0;t.getChildByName("Label").getComponent(cc.Label).string=this.words[n],console.log(this.words[n].length),this.words[n].length>3&&(t.getChildByName("bubble").scaleX=1.5),this.wordsOnScreen[e]=this.words[n],this.node.getChildByName("bubblesFolder").addChild(t),t.runAction(cc.sequence([i,cc.callFunc(this.bubbleAnimationCallback,this,t.name)]))}for(var r=this.dataConvert(this.words),l=this.alphabets.split(" "),s=1,a=0;a<l.length;a++)if("$"!==l[a]){a>9&&a<20&&(-104,120*(a-10)-530),a>19&&(l.length<29?120*(a-20)-350:120*(a-20)-530,-208),a>29&&(l.length<39?120*(a-30)-340:120*(a-30)-530,-316);var h=cc.instantiate(this.buttonPrefab);h.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=l[a],h.name=l[a],h.on("click",this.callback,this),-1===r.indexOf(h.name)?h.getComponent(cc.Button).interactable=!1:h.getComponent(cc.Button).interactable=!0,this.node.getChildByName("mainLayout").getChildByName("layout"+s).addChild(h),h.name==this.wordsOnScreen[0]&&d.Util.showHelp(h,h)}else s++},t.prototype.createDog=function(){var e=this;d.Util.loadFriend(function(t){e.friend=t.getComponent(dragonBones.ArmatureDisplay),e.friendPos.addChild(t),e.friendPos.setPosition(new cc.Vec2(-510,75)),e.friendPos.scaleX=.4,e.friendPos.scaleY=.4,c.default.i.direction==c.Direction.RTL&&(e.friendPos.setPosition(new cc.Vec2(510,75)),e.friendPos.scaleX=-.4),null!=e.friend&&e.friend.playAnimation("blowing",1)})},t.prototype.toggleKeyboard=function(e){if(this.isFirstPageKeys){this.isFirstPageKeys=!1,cc.log("its first"),this.node.getChildByName("keyboardNode").removeAllChildren();for(var t=this.dataConvert(this.words),o=100+20,i=this.alphabets.split(" "),n=30;n<i.length;n++){var r=-90,l=(n-30)*o-530;n-30>9&&n-30<20&&(r=-210,l=(n-10-30)*o-530),n-30>19&&(l=this.alphabets.length<-1?(n-20-30)*o-350:(n-20-30)*o-530,r=-330),(s=cc.instantiate(this.buttonPrefab)).position=cc.v2(l,r),s.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=i[0],s.name=i[0],s.on("click",this.callback,this),-1===t.indexOf(s.name)?s.getComponent(cc.Button).interactable=!1:s.getComponent(cc.Button).interactable=!0,this.node.getChildByName("keyboardNode").addChild(s)}}else{this.node.getChildByName("keyboardNode").removeAllChildren(),this.isFirstPageKeys=!0,cc.log("its second");for(t=this.dataConvert(this.words),o=100+20,i=this.alphabets.split(" "),n=0;n<i.length;n++){var s;r=-90,l=n*o-530;n>9&&n<20&&(r=-210,l=(n-10)*o-530),n>19&&(l=this.alphabets.length<29?(n-20)*o-350:(n-20)*o-530,r=-330),(s=cc.instantiate(this.buttonPrefab)).position=cc.v2(l,r),s.getChildByName("Background").getChildByName("Label").getComponent(cc.Label).string=i[n],s.name=i[n],s.on("click",this.callback,this),-1===t.indexOf(s.name)?s.getComponent(cc.Button).interactable=!1:s.getComponent(cc.Button).interactable=!0,this.node.getChildByName("keyboardNode").addChild(s)}}},t.prototype.callback=function(e){var t=this;this.inputBoxString=this.inputBoxString.concat(e.node.name);for(var o=0;o<3;o++)if(this.wordsOnScreen[o]===this.inputBoxString){this.score+=1,null!=this.node&&(this.node.getChildByName("score").getComponent(cc.Label).string=this.score+"/"+this.maxScore,this.node.getChildByName("richText").getComponent(cc.RichText).string=this.inputBoxString,setTimeout(function(){t.inputBoxString="",null!=t.node&&(t.node.getChildByName("richText").getComponent(cc.RichText).string=t.inputBoxString)},500));var i=250*Math.random()+100,n=(o+1).toString();if(d.Util.speakLettersOrWords(this.inputBoxString,function(){t.score>=t.maxScore&&!t.isScenePoped&&(t.node.emit("nextProblem"),t.isScenePoped=!0),t.node.emit("correct")}),null!=this.node){this.node.getChildByName("bubble_pop_node").position=this.node.getChildByName("bubblesFolder").getChildByName(n).position,this.node.getChildByName("bubble_pop_node").getComponent(cc.Animation).play(),this.node.getChildByName("bubblesFolder").getChildByName(n).position=new cc.Vec2(100*Math.random()-700,i),c.default.i.direction==c.Direction.RTL&&(this.node.getChildByName("bubblesFolder").getChildByName(n).position=new cc.Vec2(700+100*Math.random(),i)),this.node.getChildByName("bubblesFolder").getChildByName(n).stopAllActions();var r=cc.moveTo(this.fallingTime,this.bubbledestroyBoundry,i),l=Math.floor(Math.random()*(this.words.length-0))+0;this.wordsOnScreen[parseInt(n)-1]=this.words[l],this.node.getChildByName("bubblesFolder").getChildByName(n).getChildByName("Label").getComponent(cc.Label).string=this.words[l],this.node.getChildByName("bubblesFolder").getChildByName(n).runAction(cc.sequence([r,cc.callFunc(this.bubbleAnimationCallback,this,n)]))}return}for(o=0;o<3;o++)if(this.wordsOnScreen[o].startsWith(this.inputBoxString))return void(null!=this.node&&(this.node.getChildByName("richText").getComponent(cc.RichText).string=this.inputBoxString));this.node.emit("wrong"),null!=this.node&&(setTimeout(function(){t.inputBoxString="",null!=t.node&&(t.node.getChildByName("richText").getComponent(cc.RichText).string=t.inputBoxString)},100),this.node.getChildByName("richText").getComponent(cc.RichText).string=this.inputBoxString)},t.prototype.dataConvert=function(e){for(var t=[],o=0;o<this.words.length;o++)for(var i=0;i<this.words[o].length;i++)t.push(this.words[o].charAt(i));for(i=0;i<this.alphabets.length;i++)-1!=t.indexOf(this.alphabets.substr(i,1))&&console.log(this.alphabets.substr(i,1),"<<");return t},t.prototype.bubbleAnimationCallback=function(e){if(console.log("Her is log of console"),null!=this.node){var t=250*Math.random()+100;this.node.getChildByName("bubblesFolder").getChildByName(e.name).position=new cc.Vec2(this.node.getChildByName("bubblesFolder").getChildByName(e.name).x-1100,t),c.default.i.direction==c.Direction.RTL&&(this.node.getChildByName("bubblesFolder").getChildByName(e.name).position=new cc.Vec2(this.node.getChildByName("bubblesFolder").getChildByName(e.name).x+1100,t));var o=cc.moveTo(this.fallingTime,this.bubbledestroyBoundry,t),i=Math.floor(Math.random()*(this.words.length-0))+0;this.wordsOnScreen[parseInt(e.name)-1]=this.words[i],this.node.getChildByName("bubblesFolder").getChildByName(e.name).getChildByName("Label").getComponent(cc.Label).string=this.words[i],this.node.getChildByName("bubblesFolder").getChildByName(e.name).runAction(cc.sequence([o,cc.callFunc(this.bubbleAnimationCallback,this,e.name)]))}},t.prototype.processConfiguration=function(e){void 0===e&&(e=[]);var t=[].concat.apply([],e),o=t[0],i=t[1],n=t[2],r=t[3],l=t[4],s=t[5],a=t[6],c=t[7],d=t[8],h=t[9],u=t[10],p=t[11];return{level:o,worksheet:i,problemCount:n,wordRegenTime:r,words:l,numberofConsonantChoices:s,numberofVowelChoices:a,image:c,soundDuration:d,one:h,two:u,numberpads:p=p.split(",")}},n([s(cc.Label)],t.prototype,"label",void 0),n([s(cc.Prefab)],t.prototype,"bubblePrefab",void 0),n([s(cc.Prefab)],t.prototype,"buttonPrefab",void 0),n([s(cc.Node)],t.prototype,"friendPos",void 0),n([s],t.prototype,"inputBoxString",void 0),n([s({type:cc.AudioClip})],t.prototype,"correctAudio",void 0),n([s({type:cc.AudioClip})],t.prototype,"popAudio",void 0),n([s({type:cc.AudioClip})],t.prototype,"wrongAudio",void 0),n([a.default()],t.prototype,"onLoad",null),n([a.default()],t.prototype,"startGame",null),n([a.default()],t.prototype,"createDog",null),n([a.default()],t.prototype,"toggleKeyboard",null),n([a.default()],t.prototype,"callback",null),n([a.default()],t.prototype,"dataConvert",null),n([a.default()],t.prototype,"bubbleAnimationCallback",null),n([a.default()],t.prototype,"processConfiguration",null),t=n([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0}]},{},["bubbletype"]);