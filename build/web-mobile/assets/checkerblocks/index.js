window.__require=function t(e,o,n){function r(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var d="function"==typeof __require&&__require;if(!s&&d)return d(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){return r(e[a][1][t]||t)},h,h.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({checkerblocks:[function(t,e,o){"use strict";cc._RF.push(e,"f1e51cat4FPiIsV9dU4d18L","checkerblocks");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../common/scripts/lib/config"),a=t("../../../common/scripts/util"),s=t("../../../common/scripts/lib/error-handler"),c=t("../../../common/scripts/drag"),d=cc._decorator,h=d.ccclass,l=d.property,u=["#E3EB0E","#FF809A","#74F750","#56DEA8","#A857FF"],p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dragPrefab=null,e.dropPrefab=null,e.dragTilePrefab=null,e.tilePrefab=null,e.board=null,e.dark=null,e.light=null,e.truck=null,e.friendPos=null,e.truckInAudio=null,e.truckOutAudio=null,e.friend=null,e.matchCount=0,e.boardContents=[[1,2,3,4,5,6,7,8,9,10],[11,12,13,14,15,16,17,18,19,20],[21,22,23,24,25,26,27,28,29,30],[31,32,33,34,35,36,37,38,39,40],[41,42,43,44,45,46,47,48,49,50],[51,52,53,54,55,56,57,58,59,60],[61,62,63,64,65,66,67,68,69,70],[71,72,73,74,75,76,77,78,79,80],[81,82,83,84,85,86,87,88,89,90],[91,92,93,94,95,96,97,98,99,100]],e.dragTiles=new Map,e.colorMap=new Map,e}return n(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getCollisionManager().enabled=!0,c.default.letDrag=!1,a.Util.loadFriend(function(e){t.friend=e.getComponent(dragonBones.ArmatureDisplay),t.friendPos.addChild(e),t.friend.playAnimation("laugh",1)});var e=i.default.getInstance().data[0];e[0],e[1],e[2];switch(e[3]){case"1":this.generateRandomSquares();break;case"2":this.generateHorizontalStrips();break;case"3":this.generateVerticalStrips();break;case"4":this.generateHorizontalHalfStrips();break;case"5":this.generate5Multiples();break;case"6":this.generatePlus();break;case"7":this.generate2by2Squares();break;case"8":this.generateEvenColumns();break;case"9":this.generateOddColumns();break;case"10":this.generateRandomDoubleSquares();break;case"11":this.generateAllSingleSquares();break;default:this.generateRandomSquares()}for(var o=null,n=null,r=0;r<10;r++)for(var s=0;s<10;s++){var d=10*r+s+1,h=new cc.Node,l=h.addComponent(cc.Sprite);h.x=69*s,h.y=69*-r,h.anchorX=0,h.anchorY=1,l.spriteFrame=r%2==0?s%2==0?this.dark:this.light:s%2==0?this.light:this.dark,this.board.addChild(h);var p=cc.instantiate(this.boardContents[r][s]<0?this.dropPrefab:this.tilePrefab);if(p.name=d.toString(),p.x=69*s,p.y=69*-r,p.zIndex=101-d,this.board.addChild(p),this.boardContents[r][s]<0){if(!this.dragTiles.has(this.boardContents[r][s])){var f=cc.instantiate(this.dragTilePrefab);f.name=(-this.boardContents[r][s]).toString(),this.dragTiles.set(this.boardContents[r][s],f),this.colorMap.set(-this.boardContents[r][s],(new cc.Color).fromHEX(u[Math.floor(Math.random()*u.length)])),f.on("hundredpuzzleMatch",this.onMatch,this),f.on("hundredpuzzleNoMatch",function(){t.node.emit("wrong"),null!=t.friend&&t.friend.playAnimation("sad",1)}),null==o&&(o=f,n=p)}this.addToDragTile(-this.boardContents[r][s],d,this.dragTiles.get(this.boardContents[r][s]))}}var b=this.truck.x;(new cc.Tween).target(this.truck).set({x:cc.winSize.width}).call(function(){a.Util.playSfx(t.truckInAudio)}).to(3,{x:b},{progress:null,easing:"quadOut"}).call(function(){t.truck.getComponent(cc.Animation).stop(),t.dragTiles.forEach(function(e,o){e.position=cc.v2(200+Math.random()*(cc.winSize.width/2-200-e.width),-cc.winSize.height),e.zIndex=100-parseInt(e.name),t.node.addChild(e),(new cc.Tween).target(e).delay(2*Math.random()).to(.5,{y:Math.random()*(cc.winSize.height-128-e.height)-cc.winSize.height/2+e.height},{progress:null,easing:"sineOut"}).start()}),t.scheduleOnce(function(){c.default.letDrag=!0,a.Util.showHelp(o,n)},2.5)}).start()},e.prototype.onMatch=function(){var t=this;(this.node.emit("correct"),null!=this.friend&&this.friend.playAnimation("happy",1),++this.matchCount>=this.dragTiles.size)&&(this.truck.getComponent(cc.Animation).play(),(new cc.Tween).target(this.truck).delay(2).call(function(){a.Util.playSfx(t.truckOutAudio)}).to(3,{x:2*-cc.winSize.width},{progress:null,easing:"quadOut"}).call(function(){t.node.emit("nextProblem")}).start())},e.prototype.addToDragTile=function(t,e,o){var n=cc.instantiate(this.dragPrefab);n.name=e.toString(),n.x=69*((e-1)%10-(t-1)%10),n.y=69*(Math.floor((t-1)/10)-Math.floor((e-1)/10)),o.addChild(n),o.width<n.x+69&&(o.width=n.x+69),o.height<69-n.y&&(o.height=69-n.y);var r=n.getChildByName("sprite");null!=r&&(r.color=this.colorMap.get(t))},e.prototype.generateRandomSquares=function(){var t=0;do{var e=Math.floor(90*Math.random()),o=Math.floor(3*Math.random()),n=Math.floor(e/10),r=e%10;r+1<10&&this.boardContents[n][r]>0&&this.boardContents[n][r+1]>0&&this.boardContents[n+1][r]>0&&this.boardContents[n+1][r]>0&&(0==o?n+2<10&&this.boardContents[n+2][r]>0&&this.boardContents[n+2][r+1]>0&&(this.boardContents[n][r]=-(e+1),this.boardContents[n][r+1]=-(e+1),this.boardContents[n+1][r]=-(e+1),this.boardContents[n+1][r+1]=-(e+1),this.boardContents[n+2][r]=-(e+1),this.boardContents[n+2][r+1]=-(e+1),t++):1==o?r+2<10&&this.boardContents[n][r+2]>0&&this.boardContents[n+1][r+2]>0&&(this.boardContents[n][r]=-(e+1),this.boardContents[n][r+1]=-(e+1),this.boardContents[n][r+2]=-(e+1),this.boardContents[n+1][r]=-(e+1),this.boardContents[n+1][r+1]=-(e+1),this.boardContents[n+1][r+2]=-(e+1),t++):n+2<10&&r+2<10&&this.boardContents[n][r+2]>0&&this.boardContents[n+1][r+2]>0&&this.boardContents[n+2][r]>0&&this.boardContents[n+2][r+1]>0&&this.boardContents[n+2][r+2]>0&&(this.boardContents[n][r]=-(e+1),this.boardContents[n][r+1]=-(e+1),this.boardContents[n][r+2]=-(e+1),this.boardContents[n+1][r]=-(e+1),this.boardContents[n+1][r+1]=-(e+1),this.boardContents[n+1][r+2]=-(e+1),this.boardContents[n+2][r]=-(e+1),this.boardContents[n+2][r+1]=-(e+1),this.boardContents[n+2][r+2]=-(e+1),t++))}while(t<8)},e.prototype.generateHorizontalStrips=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e++)this.boardContents[t][e]=-(10*t+1)},e.prototype.generateVerticalStrips=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e++)this.boardContents[t][e]=-(e+1)},e.prototype.generateHorizontalHalfStrips=function(){var t=0;do{var e=5*Math.floor(20*Math.random())+1;if(this.boardContents[Math.floor((e-1)/10)][(e-1)%10]>0){for(var o=0;o<5;o++)this.boardContents[Math.floor((e-1)/10)][(e-1)%10+o]=-e;t++}}while(t<16)},e.prototype.generate5Multiples=function(){for(var t=0;t<10;t++)for(var e=4;e<10;e+=5)this.boardContents[t][e]=-(10*t+e+1)},e.prototype.generatePlus=function(){var t=0;do{var e=Math.floor(70*Math.random()),o=Math.floor(e/10),n=e%10;this.boardContents[o][n+1]>0&&this.boardContents[o+1][n]>0&&this.boardContents[o+1][n+2]>0&&this.boardContents[o+2][n+1]>0&&(this.boardContents[o][n+1]=-(e+1),this.boardContents[o+1][n]=-(e+1),this.boardContents[o+1][n+1]=-(e+1),this.boardContents[o+1][n+2]=-(e+1),this.boardContents[o+2][n+1]=-(e+1),t++)}while(t<8)},e.prototype.generate2by2Squares=function(){var t=0;do{var e=Math.floor(25*Math.random()),o=2*Math.floor(e/5),n=e%5*2;this.boardContents[o][n]>0&&(this.boardContents[o][n]=-(10*o+n+1),this.boardContents[o+1][n]=-(10*o+n+1),this.boardContents[o][n+1]=-(10*o+n+1),this.boardContents[o+1][n+1]=-(10*o+n+1),t++)}while(t<16)},e.prototype.generateOddShapes=function(){},e.prototype.generateEvenColumns=function(){for(var t=0;t<10;t++)for(var e=1;e<10;e+=2)this.boardContents[t][e]=-(10*t+e+1)},e.prototype.generateOddColumns=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e+=2)this.boardContents[t][e]=-(10*t+e+1)},e.prototype.generateRandomDoubleSquares=function(){var t=0;do{var e=!1,o=Math.floor(100*Math.random()),n=1==Math.floor(2*Math.random()),r=Math.floor(o/10),i=o%10;if(this.boardContents[r][i]>0&&(n?i+1<10&&this.boardContents[r][i+1]>0&&(this.boardContents[r][i]=-(o+1),this.boardContents[r][i+1]=-(o+1),t++,e=!0):r+1<10&&this.boardContents[r+1][i]>0&&(this.boardContents[r][i]=-(o+1),this.boardContents[r+1][i]=-(o+1),t++,e=!0)),!e)t:for(var a=0;a<10;a++)for(var s=0;s<10;s++)if(this.boardContents[a][s]>0){var c=10*a+s;if(s+1<10&&this.boardContents[a][s+1]>0){this.boardContents[a][s]=-(c+1),this.boardContents[a][s+1]=-(c+1),t++,e=!0;break t}if(a+1<10&&this.boardContents[a+1][s]>0){this.boardContents[a][s]=-(c+1),this.boardContents[a+1][s]=-(c+1),t++,e=!0;break t}}}while(t<45&&e)},e.prototype.generateAllSingleSquares=function(){for(var t=0;t<10;t++)for(var e=0;e<10;e++){var o=10*t+e+1;this.boardContents[t][e]=-o}},r([l(cc.Prefab)],e.prototype,"dragPrefab",void 0),r([l(cc.Prefab)],e.prototype,"dropPrefab",void 0),r([l(cc.Prefab)],e.prototype,"dragTilePrefab",void 0),r([l(cc.Prefab)],e.prototype,"tilePrefab",void 0),r([l(cc.Node)],e.prototype,"board",void 0),r([l(cc.SpriteFrame)],e.prototype,"dark",void 0),r([l(cc.SpriteFrame)],e.prototype,"light",void 0),r([l(cc.Node)],e.prototype,"truck",void 0),r([l(cc.Node)],e.prototype,"friendPos",void 0),r([l(cc.AudioClip)],e.prototype,"truckInAudio",void 0),r([l(cc.AudioClip)],e.prototype,"truckOutAudio",void 0),r([s.default()],e.prototype,"onLoad",null),e=r([h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0}],hundredpuzzleDragTile:[function(t,e,o){"use strict";cc._RF.push(e,"6aa15w9Ff5EiaFEdcQ3bdxF","hundredpuzzleDragTile");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../common/scripts/drag"),a=cc._decorator,s=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onTouchEnd=function(e){if(t.prototype.onTouchEnd.call(this,e),this.match)this.node.emit("hundredpuzzleMatch",this);else{this.node.emit("hundredpuzzleNoMatch");var o=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.node.getPosition(),r=!1;o.x+this.node.width>cc.winSize.width?(n.x-=o.x+this.node.width-cc.winSize.width,r=!0):o.x<0&&(n.x-=o.x,r=!0),o.y>cc.winSize.height?(n.y-=o.y-cc.winSize.height,r=!0):o.y-this.node.height<0&&(n.y-=o.y-this.node.height,r=!0),r&&(new cc.Tween).target(this.node).to(.25,{position:n},{progress:null,easing:"sineOut"}).start()}},e=r([s],e)}(i.default));o.default=c,cc._RF.pop()},{"../../../common/scripts/drag":void 0}],hundredpuzzleTile:[function(t,e,o){"use strict";cc._RF.push(e,"600ffKuTytNeKitMWAFPKxo","hundredpuzzleTile");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,s=i.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numberLabel=null,e}return n(e,t),e.prototype.onLoad=function(){this.numberLabel.string=this.node.name},r([s(cc.Label)],e.prototype,"numberLabel",void 0),e=r([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}]},{},["checkerblocks","hundredpuzzleDragTile","hundredpuzzleTile"]);