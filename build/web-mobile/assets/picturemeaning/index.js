window.__require=function t(e,n,i){function o(c,a){if(!n[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var s="function"==typeof __require&&__require;if(!a&&s)return s(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var l=n[c]={exports:{}};e[c][0].call(l.exports,function(t){return o(e[c][1][t]||t)},l,l.exports,t,e,n,i)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<i.length;c++)o(i[c]);return o}({picturemeaning:[function(t,e,n){"use strict";cc._RF.push(e,"60e405EGHpAWrKWiiyVrQ/P","picturemeaning");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0}),n.PictureMeaningData=n.PictureMeaningType=void 0;var r,c=t("../../../common/scripts/lib/config"),a=t("./whatisthisChoice"),u=t("../../../common/scripts/lib/error-handler"),s=t("../../../common/scripts/util"),l=cc._decorator,p=l.ccclass,h=l.property;(function(t){t[t.Sentence=0]="Sentence",t[t.Picture=1]="Picture"})(r=n.PictureMeaningType||(n.PictureMeaningType={}));var f=function(){return function(t,e,n,i,o){this.index=t,this.type=e,this.text=n,this.pic=i,this.sound=o}}();n.PictureMeaningData=f;var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.choiceLayout=null,e.answerNode=null,e.imageAnswerButtonPrefab=null,e.imageChoiceButtonPrefab=null,e.textAnswerButtonPrefab=null,e.textChoiceButtonPrefab=null,e.trafficLight=null,e.friendPos=null,e.friend=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this,e=c.default.getInstance().data[0],n=(e[0],e[1],e[2],e[3]),i=e[4],o=e[5],a=e[6],u=e[7],l=e[8],p=e[9],h=e[10],f=e[11],d=e[12];s.Util.loadFriend(function(e){t.friend=e.getComponent(dragonBones.ArmatureDisplay),t.friendPos.addChild(e),t.friend.playAnimation("joy",1)});var y="S"==n?r.Sentence:r.Picture,g=[],m=this.setupNode(0,y,i,o,a);g.push(m),g.push(this.setupNode(1,y,u,l,p)),g.push(this.setupNode(2,y,h,f,d)),(g=s.Util.shuffleByMapSortMap(g)).forEach(function(e){t.choiceLayout.addChild(e)});var w=this.choiceLayout.getComponent(cc.Layout);null!=w&&(w.type=y==r.Sentence?cc.Layout.Type.HORIZONTAL:cc.Layout.Type.VERTICAL),s.Util.showHelp(m,m)},e.prototype.setupNode=function(t,e,n,i,o){var c=new f(t,e,n,i,o),a=new f(t,e==r.Sentence?r.Picture:r.Sentence,n,i,o),u=this.createAnswer(c);this.answerNode.addChild(u),0==t?(this.answerNode.height=u.height,this.answerNode.width=u.width):(u.y=cc.winSize.height,u.zIndex=1);var s=this.createChoice(a,u);return s.on("whatisthisCorrect",this.onMatch.bind(this)),s.on("whatisthisWrong",this.onNoMatch.bind(this)),s},e.prototype.onNoMatch=function(){this.node.emit("wrong"),this.trafficLight.play("red_signal"),null!=this.friend&&this.friend.playAnimation("sad",1)},e.prototype.onMatch=function(){var t=this;this.node.emit("correct"),this.trafficLight.play("green_signal"),null!=this.friend&&this.friend.playAnimation("happy",1),this.choiceLayout.children.forEach(function(t){var e=t.getComponent(a.default);null!=e&&0!=e.data.index&&(new cc.Tween).target(t).delay(.5).to(.5,{y:-cc.winSize.height},{progress:null,easing:"quadOut"}).call(function(){t.removeFromParent()}).start()}),(new cc.Tween).target(this.friendPos).delay(4).call(function(){null!=t.friend&&t.friend.playAnimation("skating",1)}).to(2,{x:cc.winSize.width},null).call(function(){t.node.emit("nextProblem")}).start()},e.prototype.createAnswer=function(t){var e=cc.instantiate(t.type==r.Sentence?this.textAnswerButtonPrefab:this.imageAnswerButtonPrefab);t.type==r.Picture&&(e.getComponent(cc.Button).interactable=!1);var n=e.getComponent(a.default);return null!=n&&(n.data=t),e},e.prototype.createChoice=function(t,e){var n=cc.instantiate(t.type==r.Sentence?this.textChoiceButtonPrefab:this.imageChoiceButtonPrefab);n.name=t.type==r.Sentence?t.text:t.pic;var i=n.getComponent(a.default);return null!=i&&(i.data=t,i.answerNode=e),n},o([h(cc.Node)],e.prototype,"choiceLayout",void 0),o([h(cc.Node)],e.prototype,"answerNode",void 0),o([h(cc.Prefab)],e.prototype,"imageAnswerButtonPrefab",void 0),o([h(cc.Prefab)],e.prototype,"imageChoiceButtonPrefab",void 0),o([h(cc.Prefab)],e.prototype,"textAnswerButtonPrefab",void 0),o([h(cc.Prefab)],e.prototype,"textChoiceButtonPrefab",void 0),o([h(cc.Animation)],e.prototype,"trafficLight",void 0),o([h(cc.Node)],e.prototype,"friendPos",void 0),o([u.default()],e.prototype,"onLoad",null),e=o([p],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./whatisthisChoice":"whatisthisChoice"}],whatisthisChoice:[function(t,e,n){"use strict";cc._RF.push(e,"7a899DiOUlB9K3guxqBj0hk","whatisthisChoice");var i=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(c=(r<3?o(c):r>3?o(e,n,c):o(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("./picturemeaning"),c=t("../../../common/scripts/util"),a=cc._decorator,u=a.ccclass,s=a.property,l=!0,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.image=null,e.data=null,e.answerNode=null,e.soundClip=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this;l=!0,this.data.type==r.PictureMeaningType.Sentence?this.label.string=this.data.text:c.Util.loadTexture(this.data.pic,function(e){null!=e&&(t.image.spriteFrame=new cc.SpriteFrame(e))}),c.Util.loadGameSound(this.data.sound,function(e){t.soundClip=e})},e.prototype.makeInteractable=function(t){this.node.parent.children.forEach(function(e){e.getComponent(cc.Button).interactable=t})},e.prototype.onClick=function(){var t=this;if(l)if(l=!1,this.makeInteractable(!1),null!=this.soundClip&&this.scheduleOnce(function(){c.Util.play(t.soundClip,!1)},.5),0==this.data.index)this.node.emit("whatisthisCorrect");else{this.node.emit("whatisthisWrong");var e=this.answerNode.y;(new cc.Tween).target(this.answerNode).to(.5,{y:0},{progress:null,easing:"quadOut"}).delay(3).to(.5,{y:e},{progress:null,easing:"quadOut"}).call(function(){l=!0,t.makeInteractable(!0)}).start()}},o([s(cc.Label)],e.prototype,"label",void 0),o([s(cc.Sprite)],e.prototype,"image",void 0),e=o([u],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../common/scripts/util":void 0,"./picturemeaning":"picturemeaning"}]},{},["picturemeaning","whatisthisChoice"]);