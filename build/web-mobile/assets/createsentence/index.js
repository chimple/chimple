window.__require=function t(e,n,o){function r(c,a){if(!n[c]){if(!e[c]){var s=c.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var u=n[c]={exports:{}};e[c][0].call(u.exports,function(t){return r(e[c][1][t]||t)},u,u.exports,t,e,n,o)}return n[c].exports}for(var i="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({createsentence:[function(t,e,n){"use strict";cc._RF.push(e,"0d522qsfkdF0ZDB0HxoAs0Y","createsentence");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../common/scripts/lib/config"),c=t("../../../common/scripts/util"),a=t("./sentencemakerDrag"),s=t("../../../common/scripts/lib/error-handler"),l=t("../../../common/scripts/drag"),u=cc._decorator,p=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.truck=null,e.picture=null,e.soundBtn=null,e.answer=null,e.choices=null,e.dropPrefab=null,e.dragPrefab=null,e.friendPos=null,e.friend=null,e.soundClip=null,e.numAnswers=0,e.isRTL=!1,e}return o(e,t),e.prototype.onLoad=function(){var t=this;this.isRTL=i.default.i.direction==i.Direction.RTL,cc.director.getCollisionManager().enabled=!0,l.default.letDrag=!1,c.Util.loadFriend(function(e){t.friend=e.getComponent(dragonBones.ArmatureDisplay),t.friendPos.addChild(e),t.friend.playAnimation("face_eating",1)});var e=i.default.getInstance().data[0],n=(e[0],e[1],e[2],e[3]),o=e[4],r=e[5],s=e[6];c.Util.loadGameSound(s,function(e){null!=e?t.soundClip=e:t.soundBtn.interactable=!1});var u=this.picture.node.width,p=this.picture.node.height;c.Util.loadTexture(r,function(e){t.picture.spriteFrame=new cc.SpriteFrame(e);var n=t.picture.spriteFrame.getOriginalSize(),o=u/n.width,r=p/n.height,i=Math.min(o,r);t.picture.node.width=i*n.width,t.picture.node.height=i*n.height}),this.onFinishTruckMoveTo=-cc.winSize.width;var d=n.split("/");this.isRTL&&(d.reverse(),this.onFinishTruckMoveTo=2*cc.winSize.width,this.truck.scaleX=-1),this.numAnswers=d.length,d.forEach(function(e){var n=cc.instantiate(t.dropPrefab);n.name=e,t.answer.addChild(n)}),o.length>0&&d.push(o),c.Util.shuffle(d);var f=0;d.forEach(function(e){var n=cc.instantiate(t.dragPrefab);if(n.name=e,t.isRTL){var o=new cc.Node;o.name="shouldFlip",n.addChild(o)}n.on("sentencemakerMatch",t.onMatch.bind(t)),n.on("sentencemakerNoMatch",function(){t.node.emit("wrong"),null!=t.friend&&t.friend.playAnimation("face_wrong",1)});var r=n.getComponent(a.default);n.getComponent(a.default).allowDrag=!1,null!=r&&(r.label.string=e);var i=new cc.Node;i.name=e,i.addChild(n),t.choices.addChild(i),f+=.5,(new cc.Tween).target(n).set({y:-300}).delay(f).to(.5,{y:0},{progress:null,easing:"cubicIn"}).start()});var h=this.truck.x;(new cc.Tween).target(this.truck).set({x:cc.winSize.width*(this.isRTL?-1:1)}).to(3,{x:h+(this.isRTL?1e3:0)},{progress:null,easing:"quadOut"}).call(function(){t.truck.getComponent(cc.Animation).stop(),l.default.letDrag=!0,t.speak(function(){var e=t.answer.children[0],n=t.choices.getChildByName(e.name);null!=n&&n.childrenCount>0&&c.Util.showHelp(n.children[0],e),t.choices.children.forEach(function(t){t.children[0].getComponent(a.default).allowDrag=!0})})}).start()},e.prototype.onButtonClick=function(){this.speak()},e.prototype.speak=function(t){var e=this;this.soundBtn.interactable=!1,c.Util.speakClip(this.soundClip,function(){e.soundBtn.interactable=!0,null!=t&&t()})},e.prototype.onMatch=function(){var t=this;this.node.emit("correct"),null!=this.friend&&this.friend.playAnimation("face_happy",1),--this.numAnswers<=0&&(l.default.letDrag=!1,this.speak(function(){t.truck.getComponent(cc.Animation).play(),(new cc.Tween).target(t.truck).to(3,{x:t.onFinishTruckMoveTo},{progress:null,easing:"quadOut"}).call(function(){t.node.emit("nextProblem")}).start()}))},r([d(cc.Node)],e.prototype,"truck",void 0),r([d(cc.Sprite)],e.prototype,"picture",void 0),r([d(cc.Button)],e.prototype,"soundBtn",void 0),r([d(cc.Node)],e.prototype,"answer",void 0),r([d(cc.Node)],e.prototype,"choices",void 0),r([d(cc.Prefab)],e.prototype,"dropPrefab",void 0),r([d(cc.Prefab)],e.prototype,"dragPrefab",void 0),r([d(cc.Node)],e.prototype,"friendPos",void 0),r([s.default()],e.prototype,"onLoad",null),e=r([p],e)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./sentencemakerDrag":"sentencemakerDrag"}],sentencemakerDrag:[function(t,e,n){"use strict";cc._RF.push(e,"926b5QAJK1Dw5gQWQQqe12B","sentencemakerDrag");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../common/scripts/drag"),c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onTouchEnd=function(e){t.prototype.onTouchEnd.call(this,e),this.match?this.node.emit("sentencemakerMatch",this):this.node.emit("sentencemakerNoMatch")},e=r([a],e)}(i.default));n.default=s,cc._RF.pop()},{"../../../common/scripts/drag":void 0}],sentencemakerDrop:[function(t,e,n){"use strict";cc._RF.push(e,"d3189irwaJD6bjDTJkHGYD7","sentencemakerDrop");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var i=t("../../../common/scripts/drop"),c=cc._decorator,a=c.ccclass,s=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.origWidth=0,e}return o(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.origWidth=this.node.width},e.prototype.onCollisionEnter=function(e,n){t.prototype.onCollisionEnter.call(this,e,n),this.allowDrop&&(this.node.width=e.node.width)},e.prototype.onCollisionExit=function(e,n){t.prototype.onCollisionExit.call(this,e,n),this.allowDrop&&(this.node.width=this.origWidth)},e=r([a],e)}(i.default));n.default=s,cc._RF.pop()},{"../../../common/scripts/drop":void 0}]},{},["createsentence","sentencemakerDrag","sentencemakerDrop"]);