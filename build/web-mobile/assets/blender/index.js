window.__require=function t(e,n,o){function r(l,a){if(!n[l]){if(!e[l]){var c=l.split("/");if(c=c[c.length-1],!e[c]){var u="function"==typeof __require&&__require;if(!a&&u)return u(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+l+"'")}l=c}var d=n[l]={exports:{}};e[l][0].call(d.exports,function(t){return r(e[l][1][t]||t)},d,d.exports,t,e,n,o)}return n[l].exports}for(var i="function"==typeof __require&&__require,l=0;l<o.length;l++)r(o[l]);return r}({"add-button":[function(t,e,n){"use strict";cc._RF.push(e,"4513aTMXchNBpNJlsTFjleg","add-button");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,l=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(l=(i<3?r(l):i>3?r(e,n,l):r(e,n))||l);return i>3&&l&&Object.defineProperty(e,n,l),l};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator.ccclass,l=t("./blender"),a=cc._decorator.property,c=t("../../../common/scripts/lib/error-handler"),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._layout=null,e.placeValueNode=null,e._handleClick=!0,e.addClip=null,e}return o(e,t),e.prototype.onLoad=function(){this._handleClick=!0,this._layout=this.node.parent.getChildByName("layout")},e.prototype.check=function(){this._handleClick&&this.checkIfClickAllowed(this.node,this._layout)?this.makeInteractable(!0):this.makeInteractable(!1)},e.prototype.onClick=function(t,e){var n=this;try{if(this.check(),this._handleClick&&this.addClip){this.makeInteractable(!1);var o=this.placeValueNode.getComponent(l.default);this.node.name===l.ADD_BUTTON_HUNDRED?o.addToHundredContainer(!1):this.node.name===l.ADD_BUTTON_TEN?o.addToTenContainer(!1):this.node.name===l.ADD_BUTTON_ONE&&o.addToOneContainer(!1),this.scheduleOnce(function(){n.makeInteractable(!0),cc.audioEngine.playEffect(n.addClip,!1);var t=new cc.Event.EventCustom(l.ADDED_PLACE_VALUE_ITEM,!0);n.node.dispatchEvent(t)},.05)}}catch(t){}},e.prototype.makeInteractable=function(t,e){void 0===e&&(e=!1),e&&(t=!1);var n=this.node.getComponent(cc.Button);n&&(n.interactable=t,this._handleClick=t)},e.prototype.hundredCount=function(){return this.node.parent.parent.getChildByName(l.BLENDER1_NODE).getChildByName(l.LAYOUT).childrenCount},e.prototype.tenCount=function(){return this.node.parent.parent.getChildByName(l.BLENDER2_NODE).getChildByName(l.LAYOUT).childrenCount},e.prototype.oneCount=function(){return this.node.parent.parent.getChildByName(l.BLENDER3_NODE).getChildByName(l.LAYOUT).childrenCount},e.prototype.checkIfClickAllowed=function(t,e){return t.name===l.ADD_BUTTON_HUNDRED?e.children.length<l.MAX_CHILDREN:t.name===l.ADD_BUTTON_TEN?this.hundredCount()<l.MAX_CHILDREN&&e.children.length<=l.MAX_CHILDREN||this.hundredCount()===l.MAX_CHILDREN&&e.children.length<l.MAX_CHILDREN:t.name===l.ADD_BUTTON_ONE&&(this.hundredCount()===l.MAX_CHILDREN&&this.tenCount()===l.MAX_CHILDREN&&e.children.length<l.MAX_CHILDREN||(this.hundredCount()<l.MAX_CHILDREN||this.tenCount()<l.MAX_CHILDREN)&&e.children.length<=l.MAX_CHILDREN)},r([a(cc.AudioClip)],e.prototype,"addClip",void 0),r([c.default()],e.prototype,"onLoad",null),r([c.default()],e.prototype,"check",null),r([c.default()],e.prototype,"onClick",null),r([c.default()],e.prototype,"makeInteractable",null),r([c.default()],e.prototype,"hundredCount",null),r([c.default()],e.prototype,"tenCount",null),r([c.default()],e.prototype,"oneCount",null),r([c.default()],e.prototype,"checkIfClickAllowed",null),e=r([i],e)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../common/scripts/lib/error-handler":void 0,"./blender":"blender"}],blender:[function(t,e,n){"use strict";cc._RF.push(e,"c59e1Wgl6tDc5EUtmShqDcJ","blender");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,l=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(l=(i<3?r(l):i>3?r(e,n,l):r(e,n))||l);return i>3&&l&&Object.defineProperty(e,n,l),l};Object.defineProperty(n,"__esModule",{value:!0}),n.MOVE_IF_NEEDED=n.ADDED_PLACE_VALUE_ITEM=n.PLAY_FINAL_ANIMATION=n.REMOVED_PLACE_VALUE_ITEM=n.LAND_ONE_COLOR=n.LAND_ONE_SCALE_Y=n.LAND_ONE_SCALE_X=n.LAND_HUNDRED_COLOR=n.LAND_HUNDRED_SCALE=n.LAND_TEN_COLOR=n.LAND_TEN_SCALE_Y=n.LAND_TEN_SCALE_X=n.MAX_CHILDREN=n.LAYOUT=n.REMOVE_BUTTON_ONE=n.REMOVE_BUTTON_TEN=n.REMOVE_BUTTON_HUNDRED=n.ADD_BUTTON_ONE=n.ADD_BUTTON_TEN=n.ADD_BUTTON_HUNDRED=n.landTen=n.landOne=n.landhundred=n.BLENDER3_NODE=n.BLENDER2_NODE=n.BLENDER1_NODE=void 0;var i=cc._decorator.ccclass,l=cc._decorator.property,a=t("../../../common/scripts/lib/config"),c=t("./add-button"),u=t("./remove-button"),d=t("../../../common/scripts/lib/error-handler"),h=t("../../../common/scripts/util");n.BLENDER1_NODE="blender1_node",n.BLENDER2_NODE="blender2_node",n.BLENDER3_NODE="blender3_node",n.landhundred="landHundred",n.landOne="landOne",n.landTen="landTen",n.ADD_BUTTON_HUNDRED="add_button_hundred",n.ADD_BUTTON_TEN="add_button_ten",n.ADD_BUTTON_ONE="add_button_one",n.REMOVE_BUTTON_HUNDRED="remove_button_hundred",n.REMOVE_BUTTON_TEN="remove_button_ten",n.REMOVE_BUTTON_ONE="remove_button_one",n.LAYOUT="layout",n.MAX_CHILDREN=9;n.LAND_TEN_SCALE_X=.9,n.LAND_TEN_SCALE_Y=.9,n.LAND_TEN_COLOR="#00FF2A",n.LAND_HUNDRED_SCALE=.9,n.LAND_HUNDRED_COLOR="#EAFF00",n.LAND_ONE_SCALE_X=.8,n.LAND_ONE_SCALE_Y=.8,n.LAND_ONE_COLOR="#42F9FF",n.REMOVED_PLACE_VALUE_ITEM="REMOVED_PLACE_VALUE_ITEM",n.PLAY_FINAL_ANIMATION="PLAY_FINAL_ANIMATION",n.ADDED_PLACE_VALUE_ITEM="ADDED_PLACE_VALUE_ITEM",n.MOVE_IF_NEEDED="MOVE_IF_NEEDED";var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mixturePrefab=null,e.goalPrefab=null,e.landHundredPrefab=null,e.landTenPrefab=null,e.landOnePrefab=null,e.placeLabelPrefab=null,e._currentConfig=null,e._mixture=null,e._placeValueComponent=null,e._hundredTextNode=null,e._tenTextNode=null,e._oneTextNode=null,e._hundredLayoutNode=null,e._tenLayoutNode=null,e._oneLayoutNode=null,e._finalText=0,e._cup=null,e._collectStarted=!1,e._collectedHundred=!1,e._collectedTenth=!1,e._collectedOne=!1,e._landHundredPos=null,e._landTenPos=null,e._landOnePos=null,e.zeroT=h.Util.i18NText("0"),e.cupText="<color=#EAFF00><bold>@0<color=#00FF2A><bold>@1</bold></color><color=#42F9FF><bold>@2</bold></color></bold></color>",e.objectives=[],e._helpMode=!1,e._helpNodes=[],e}var p;return o(e,t),p=e,e.prototype.onLoad=function(){var t=this;cc.director.getCollisionManager().enabled=!0,this._mixture=cc.instantiate(this.mixturePrefab),this._placeValueComponent=this.node.getComponent(p),this._currentConfig=this.processConfiguration(a.default.getInstance().data[0]),this.objectives=this._currentConfig.objectNo.split(""),this.node.on(n.ADDED_PLACE_VALUE_ITEM,function(e){e.stopPropagation(),t.moveIfNeeded()}),this.node.on(n.REMOVED_PLACE_VALUE_ITEM,function(e){e.stopPropagation(),t.moveIfNeeded()}),this.node.on(n.PLAY_FINAL_ANIMATION,function(){t.playFinishAnimation()}),this._helpMode=!0,this.createCup()},e.prototype.playFinishAnimation=function(){var t=this;this._collectStarted||parseInt(this._currentConfig.objectNo)!==this._finalText||(this.node.emit("correct"),this.stopRemoVeFromContainers(),this.scheduleOnce(function(){var e=t._mixture.getComponent(cc.Animation);null!==e&&(e.stop(),e.on("finished",function(){t.collectNumbers()},t),e.play("blending"))},0))},e.prototype.collectNumbers=function(){this._collectStarted||(this._collectStarted=!0,this.updateToLabel(this._cup,"","",null,"#654321",!1),this.moveCupToNext())},e.prototype.moveCupToNext=function(){var t=this;this._collectedHundred?this._collectedTenth?this._collectedOne?this.scheduleOnce(function(){var e=t.formatFinalTextForSpeak(t._finalText);e&&e.length>0?h.Util.speakEquation(e,function(n){n+1===e.length&&(t._finalText=null,t._collectStarted=!1,t.node.emit("nextProblem"))}):t.node.emit("nextProblem")},.5):this.moveCupToBlender(this._mixture.getChildByName(n.BLENDER3_NODE),this._oneTextNode,"_collectedOne"):this.moveCupToBlender(this._mixture.getChildByName(n.BLENDER2_NODE),this._tenTextNode,"_collectedTenth"):this.moveCupToBlender(this._mixture.getChildByName(n.BLENDER1_NODE),this._hundredTextNode,"_collectedHundred")},e.prototype.formatFinalTextForSpeak=function(t){var e=Math.floor(t/100),n=String(t%100),o="en/"===a.default.dir?"and":"",r=[];return 0!==e&&r.push(String(100*e)),o&&r.push(o),(2===n.length&&"00"!==n||1===n.length&&"0"!==n)&&r.push(n),r},e.prototype.moveCupToBlender=function(t,e,n){var o=this,r=this.node.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v3(0,0)));(new cc.Tween).target(this._cup).to(1,{position:new cc.Vec2(r.x,this._cup.position.y)},{progress:null,easing:"quadOut"}).call(function(){var t=e.convertToWorldSpaceAR(cc.v3(0,0)),r=o.node.convertToNodeSpaceAR(t);e.removeFromParent(!1),o.node.addChild(e),e.setPosition(r),(new cc.Tween).target(e).to(1,{position:new cc.Vec2(e.position.x,e.position.y+140)},{progress:null,easing:"quadOut"}).to(.25,{opacity:0},null).call(function(){var t=o._cup.getComponent(cc.Animation);t.on("glass_filling",function(t){}),t.play()}).call(function(){var t=o.labelValue(e),r=[];"_collectedHundred"===n?(r.push(String(Number(o.objectives[0]))),r.push("100")):"_collectedTenth"===n?(r.push(String(Number(o.objectives[1]))),r.push("10")):"_collectedOne"===n&&(r.push(String(Number(o.objectives[2]))),r.push("1")),o.replaceCupText(o._cup,r,t,function(){o[""+n]=!0,o.moveCupToNext()})}).start()}).start()},e.prototype.labelValue=function(t){var e=null,n=t.getChildByName("placeLabel");if(null!==n){var o=n.getChildByName("label");if(null!==o)e=o.getComponent(cc.RichText).string.replace(/<\/?[^>]+(>|$)/g,"")||""}return e},e.prototype.stopRemoVeFromContainers=function(){[this._mixture.getChildByName(n.BLENDER1_NODE),this._mixture.getChildByName(n.BLENDER2_NODE),this._mixture.getChildByName(n.BLENDER3_NODE)].forEach(function(t,e){var o=0==e?n.ADD_BUTTON_HUNDRED:1==e?n.ADD_BUTTON_TEN:n.ADD_BUTTON_ONE;t.getChildByName(o).getComponent(c.default).makeInteractable(!1),o=0==e?n.REMOVE_BUTTON_HUNDRED:1==e?n.REMOVE_BUTTON_TEN:n.REMOVE_BUTTON_ONE,t.getChildByName(o).getComponent(u.default).makeInteractable(!1)})},e.prototype.createCup=function(){var t=this;this._cup=cc.instantiate(this.goalPrefab),this.node.addChild(this._cup),this._cup.scale=2.25;String(Number(this._currentConfig.objectNo)).split("").map(function(t,e){return"0"!==t&&String(Number(t)*Math.pow(10,2-e))});this.replaceCupText(this._cup,[String(Number(this._currentConfig.objectNo))],h.Util.i18NNumberConvert(String(this._currentConfig.objectNo)),function(){t.moveCup()})},e.prototype.replaceCupText=function(t,e,n,o){void 0===o&&(o=Function=null);var r=n.split(""),i=this.cupText;if(3===r.length)for(var l=0;l<=r.length-1;l++)i=i.replace("@"+l,r[l]),0===l&&(this.cupText=this.cupText.replace("@"+l,r[l]));else if(2===r.length)for(l=0;l<=r.length-1;l++)i=i.replace("@"+(l+1),r[l]),0===l&&(this.cupText=this.cupText.replace("@"+(l+1),r[l]));else if(1===r.length)for(l=0;l<=r.length-1;l++)i=i.replace("@2",r[l]),this.cupText=this.cupText.replace("@2",r[l]);var a=t.getChildByName("placeLabel");if(null!==a){var c=a.getChildByName("label");if(null!==c){var u=c.getComponent(cc.RichText);(new cc.Tween).target(c).to(.25,{opacity:0},null).call(function(){u.string=i}).to(.25,{opacity:255},null).start()}}try{h.Util.speakEquation(e,function(t){t+1==e.length&&o&&o()})}catch(t){}},e.prototype.moveCup=function(){var t=this;(new cc.Tween).target(this._cup).parallel((new cc.Tween).to(1,{position:new cc.Vec2(100+3*-cc.winSize.width/8,5*cc.winSize.height/12+15)},null),(new cc.Tween).to(1,{scale:1},{progress:null,easing:"backOut"})).call(function(){var e=t.formatFinalTextForSpeak(Number(t._currentConfig.objectNo));e&&e.length>0?h.Util.speakEquation(e,function(n){n+1===e.length&&t.scheduleOnce(function(){t.buildScene()},.5)}):"000"!==t._currentConfig.objectNo&&"00"!==t._currentConfig.objectNo&&"0"!==t._currentConfig.objectNo||t.scheduleOnce(function(){t.buildScene()},.5)}).start()},e.prototype.moveIfNeeded=function(){this.oneLayoutAnimate(),this.tenLayoutAnimate()},e.prototype.oneLayoutAnimate=function(){this.oneCount()>n.MAX_CHILDREN?(this._oneLayoutNode.removeAllChildren(!0),this.playTenMoveAnimation()):(this.updateText(),parseInt(this._currentConfig.objectNo)===this._finalText&&this.node.emit(n.PLAY_FINAL_ANIMATION))},e.prototype.tenLayoutAnimate=function(){this.tenCount()>n.MAX_CHILDREN?(this._tenLayoutNode.removeAllChildren(!0),this.playHundredMoveAnimation()):(this.updateText(),parseInt(this._currentConfig.objectNo)===this._finalText&&this.node.emit(n.PLAY_FINAL_ANIMATION))},e.prototype.hundredCount=function(){return this._mixture.getChildByName(n.BLENDER1_NODE).getChildByName(n.LAYOUT).childrenCount},e.prototype.tenCount=function(){return this._mixture.getChildByName(n.BLENDER2_NODE).getChildByName(n.LAYOUT).childrenCount},e.prototype.oneCount=function(){return this._mixture.getChildByName(n.BLENDER3_NODE).getChildByName(n.LAYOUT).childrenCount},e.prototype.updateText=function(){var t=0===this._hundredLayoutNode.childrenCount?"000":String(100*this._hundredLayoutNode.childrenCount);this.updateToLabel(this._hundredTextNode,t,t,null,n.LAND_HUNDRED_COLOR);var e=this._tenLayoutNode.childrenCount>9?"00":0===this._tenLayoutNode.childrenCount?"00":String(10*this._tenLayoutNode.childrenCount);this.updateToLabel(this._tenTextNode,e,e,null,n.LAND_TEN_COLOR);var o=String(1*this._oneLayoutNode.childrenCount);this.updateToLabel(this._oneTextNode,o,o,null,n.LAND_ONE_COLOR),this._finalText=Number(100*this._hundredLayoutNode.childrenCount+10*this._tenLayoutNode.childrenCount+1*this._oneLayoutNode.childrenCount)},e.prototype.updateToLabel=function(t,e,n,o,r,i){void 0===o&&(o=null),void 0===r&&(r=null),void 0===i&&(i=!1);var l=t.getChildByName("placeLabel"),a=e;if(n=h.Util.i18NNumberConvert(n),o?n=o:r&&(n="<color="+r+"><bold>"+n+"</bold></color>"),null!==l){var c=l.getChildByName("label");if(null!==c){var u=c.getComponent(cc.RichText),d=u.string,p=h.Util.i18NText(this.zeroT),_=a.startsWith(p)&&a.endsWith(p);if(a&&!isNaN(Number(a))&&d!==n&&(!_||i))try{h.Util.speakEquation([a],function(t){})}catch(t){}d!==n&&(new cc.Tween).target(c).to(.25,{opacity:0},null).call(function(){u.string=n}).to(.25,{opacity:255},null).start()}}},e.prototype.buildScene=function(){var t=this;this._mixture.setPosition(new cc.Vec2(100+this._mixture.x-cc.winSize.width/4,this._mixture.y-25)),this.node.addChild(this._mixture);var e=this._mixture.getChildByName(n.BLENDER1_NODE),o=this._mixture.getChildByName(n.BLENDER2_NODE),r=this._mixture.getChildByName(n.BLENDER3_NODE);e.getChildByName("label").getComponent(cc.Label).string=h.Util.i18NText("hundred"),o.getChildByName("label").getComponent(cc.Label).string=h.Util.i18NText("ten"),r.getChildByName("label").getComponent(cc.Label).string=h.Util.i18NText("one"),this._hundredTextNode=e.getChildByName("text_bg"),this._tenTextNode=o.getChildByName("text_bg"),this._oneTextNode=r.getChildByName("text_bg"),this._hundredLayoutNode=e.getChildByName(n.LAYOUT),this._tenLayoutNode=o.getChildByName(n.LAYOUT),this._oneLayoutNode=r.getChildByName(n.LAYOUT),[e,o,r].forEach(function(e,o){var r=0==o?n.ADD_BUTTON_HUNDRED:1==o?n.ADD_BUTTON_TEN:n.ADD_BUTTON_ONE;e.getChildByName(r).getComponent(c.default).placeValueNode=t.node});var i=0===Number(this._currentConfig.suggestHundredDigit)?"000":String(100*Number(this._currentConfig.suggestHundredDigit));this.buildContainer(this._mixture.getChildByName(n.BLENDER1_NODE),i,Number(this._currentConfig.suggestHundredDigit),this.landHundredPrefab,n.landhundred,n.LAND_HUNDRED_SCALE,n.LAND_HUNDRED_SCALE,n.LAND_HUNDRED_COLOR);var l=0===Number(this._currentConfig.suggestTenthDigit)?"00":String(10*Number(this._currentConfig.suggestTenthDigit));this.buildContainer(this._mixture.getChildByName(n.BLENDER2_NODE),l,Number(this._currentConfig.suggestTenthDigit),this.landTenPrefab,n.landTen,n.LAND_TEN_SCALE_X,n.LAND_TEN_SCALE_Y,n.LAND_TEN_COLOR);var a=0===Number(this._currentConfig.suggestZerothDigit)?"0":String(1*Number(this._currentConfig.suggestZerothDigit));this.buildContainer(this._mixture.getChildByName(n.BLENDER3_NODE),a,Number(this._currentConfig.suggestZerothDigit),this.landOnePrefab,n.landOne,n.LAND_ONE_SCALE_X,n.LAND_ONE_SCALE_Y,n.LAND_ONE_COLOR)},e.prototype.processConfiguration=function(t){void 0===t&&(t=[]);var e=[].concat.apply([],t),n=e[0],o=e[1],r=e[2],i=e[3],l=e[4];i=1===i.length?"00"+i:2===i.length?"0"+i:i;var a=(l=1===l.length?"00"+l:2===l.length?"0"+l:l).split("");return{level:n,workSheet:o,problem:r,objectNo:i,suggestNo:l,suggestHundredDigit:a[0],suggestTenthDigit:a[1],suggestZerothDigit:a[2]}},e.prototype.playTenMoveAnimation=function(){var t=this,e=this.createFromPrefab(this.landTenPrefab,n.LAND_TEN_SCALE_X,n.LAND_TEN_SCALE_Y),o=this._mixture.getChildByName(n.BLENDER2_NODE),r=this._mixture.getChildByName(n.BLENDER3_NODE),i=this.node.convertToNodeSpaceAR(r.getPosition());e.setPosition(i.x+r.width-25+o.width/2,i.y+r.height-150),this.node.addChild(e),(new cc.Tween).target(e).to(1,{opacity:255},null).to(1,{position:new cc.Vec2(e.position.x-r.width+25-o.width/2,e.position.y)},{progress:null,easing:"quadOut"}).call(function(){e.active=!1,e.removeFromParent(!0),t.scheduleOnce(function(){t.addToTenContainer(),t.tenLayoutAnimate()},.5)}).start()},e.prototype.playHundredMoveAnimation=function(){var t=this,e=this.createFromPrefab(this.landHundredPrefab,n.LAND_HUNDRED_SCALE,n.LAND_HUNDRED_SCALE),o=this._mixture.getChildByName(n.BLENDER1_NODE),r=this._mixture.getChildByName(n.BLENDER2_NODE),i=this.node.convertToNodeSpaceAR(r.getPosition());e.setPosition(i.x+r.width-25,i.y+r.height-100),this.node.addChild(e),e.scale=.6,(new cc.Tween).target(e).to(1,{opacity:255},null).to(1,{position:new cc.Vec2(e.position.x-o.width/2-50,e.position.y)},{progress:null,easing:"quadOut"}).call(function(){e.active=!1,e.removeFromParent(!0),t.scheduleOnce(function(){t.addToHundredContainer()},.5)}).start()},e.prototype.addToOneContainer=function(t){void 0===t&&(t=!0),this.addToContainer(10,this._oneLayoutNode,this.landOnePrefab,n.LAND_ONE_SCALE_X,n.LAND_ONE_SCALE_Y)},e.prototype.addToTenContainer=function(t){void 0===t&&(t=!0),this.addToContainer(10,this._tenLayoutNode,this.landTenPrefab,n.LAND_TEN_SCALE_X,n.LAND_TEN_SCALE_Y),t&&this.updateText()},e.prototype.addToHundredContainer=function(t){void 0===t&&(t=!0),this.addToContainer(100,this._hundredLayoutNode,this.landHundredPrefab,n.LAND_HUNDRED_SCALE,n.LAND_HUNDRED_SCALE),t&&(this.updateText(),parseInt(this._currentConfig.objectNo)===this._finalText&&this.node.emit(n.PLAY_FINAL_ANIMATION))},e.prototype.createFromPrefab=function(t,e,n){var o=cc.instantiate(t);return o.scaleX=e,o.scaleY=n,o.setPosition(new cc.Vec2(0,0)),o},e.prototype.addToContainer=function(t,e,n,o,r,i){void 0===i&&(i=!1);var l=this.createFromPrefab(n,o,r);e.addChild(l)},e.prototype.setUpLayout=function(t,e,n,o,r,i){for(var l=0;l<n;l++)this.addToContainer(t,e,o,r,i,!0)},e.prototype.createLabel=function(t,e,n){void 0===e&&(e="#ffffff"),void 0===n&&(n=!1);var o=cc.instantiate(this.placeLabelPrefab),r=o.getChildByName("label"),i=r.getComponent(cc.RichText);return t=h.Util.i18NNumberConvert(t),i.string="<color="+e+"><bold>"+t+"</bold></color>",n&&(i.fontSize=32,o.width=r.width),o},e.prototype.buildContainer=function(t,e,o,r,i,l,a,c){t.getChildByName("text_bg").addChild(this.createLabel(e,c));t.getChildByName(n.LAYOUT);var u=0;switch(i){case n.landhundred:u=100;break;case n.landTen:u=10;break;case n.landOne:u=1}this.setUpLayout(u,t.getChildByName(n.LAYOUT),o,r,l,a)},r([l(cc.Prefab)],e.prototype,"mixturePrefab",void 0),r([l(cc.Prefab)],e.prototype,"goalPrefab",void 0),r([l(cc.Prefab)],e.prototype,"landHundredPrefab",void 0),r([l(cc.Prefab)],e.prototype,"landTenPrefab",void 0),r([l(cc.Prefab)],e.prototype,"landOnePrefab",void 0),r([l(cc.Prefab)],e.prototype,"placeLabelPrefab",void 0),r([d.catchError()],e.prototype,"onLoad",null),r([d.catchError()],e.prototype,"moveCupToNext",null),r([d.catchError()],e.prototype,"formatFinalTextForSpeak",null),r([d.catchError()],e.prototype,"moveCupToBlender",null),r([d.catchError()],e.prototype,"labelValue",null),r([d.catchError()],e.prototype,"stopRemoVeFromContainers",null),r([d.catchError()],e.prototype,"createCup",null),r([d.catchError()],e.prototype,"replaceCupText",null),r([d.catchError()],e.prototype,"moveCup",null),r([d.catchError()],e.prototype,"moveIfNeeded",null),r([d.catchError()],e.prototype,"oneLayoutAnimate",null),r([d.catchError()],e.prototype,"tenLayoutAnimate",null),r([d.catchError()],e.prototype,"hundredCount",null),r([d.catchError()],e.prototype,"tenCount",null),r([d.catchError()],e.prototype,"oneCount",null),r([d.catchError()],e.prototype,"updateText",null),r([d.catchError()],e.prototype,"updateToLabel",null),r([d.catchError()],e.prototype,"buildScene",null),r([d.catchError()],e.prototype,"processConfiguration",null),r([d.catchError()],e.prototype,"playTenMoveAnimation",null),r([d.catchError()],e.prototype,"playHundredMoveAnimation",null),r([d.catchError()],e.prototype,"addToOneContainer",null),r([d.catchError()],e.prototype,"addToTenContainer",null),r([d.catchError()],e.prototype,"addToHundredContainer",null),r([d.catchError()],e.prototype,"createFromPrefab",null),r([d.catchError()],e.prototype,"addToContainer",null),r([d.catchError()],e.prototype,"setUpLayout",null),r([d.catchError()],e.prototype,"createLabel",null),r([d.catchError()],e.prototype,"buildContainer",null),e=p=r([i],e)}(cc.Component);n.default=p,cc._RF.pop()},{"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./add-button":"add-button","./remove-button":"remove-button"}],"remove-button":[function(t,e,n){"use strict";cc._RF.push(e,"d159amRl1tGOoudBdjr9bL9","remove-button");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,l=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(l=(i<3?r(l):i>3?r(e,n,l):r(e,n))||l);return i>3&&l&&Object.defineProperty(e,n,l),l};Object.defineProperty(n,"__esModule",{value:!0});var i=cc._decorator.ccclass,l=cc._decorator.property,a=t("../../../common/scripts/util"),c=t("./blender"),u=t("./add-button"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.removeClip=null,e._handleClick=!0,e}return o(e,t),e.prototype.onLoad=function(){this._handleClick=!0},e.prototype.onClick=function(t,e){var n=this;try{var o="",r=null;if(this.node.name===c.REMOVE_BUTTON_HUNDRED?(o=c.BLENDER1_NODE,r=this.node.parent.getChildByName("add_button_hundred")):this.node.name===c.REMOVE_BUTTON_TEN?(o=c.BLENDER2_NODE,r=this.node.parent.getChildByName("add_button_ten")):this.node.name===c.REMOVE_BUTTON_ONE&&(o=c.BLENDER3_NODE,r=this.node.parent.getChildByName("add_button_one")),this._handleClick&&this.childCount(o)>0)this.makeInteractable(!1),this.removeLastChild(o),r.getComponent(u.default).makeInteractable(!0),this.scheduleOnce(function(){var t=new cc.Event.EventCustom(c.REMOVED_PLACE_VALUE_ITEM,!0);n.node.dispatchEvent(t),a.Util.play(n.removeClip,!1),n.makeInteractable(!0)},.05)}catch(t){}},e.prototype.makeInteractable=function(t){var e=this.node.getComponent(cc.Button);e&&(e.interactable=t,this._handleClick=t)},e.prototype.removeHundredChild=function(){var t=this.node.parent.parent.getChildByName(c.BLENDER1_NODE).getChildByName(c.LAYOUT),e=t.children||[];t.removeChild(e[e.length-1])},e.prototype.removeTenChild=function(){var t=this.node.parent.parent.getChildByName(c.BLENDER2_NODE).getChildByName(c.LAYOUT),e=t.children||[];t.removeChild(e[e.length-1])},e.prototype.removeOneChild=function(){var t=this.node.parent.parent.getChildByName(c.BLENDER3_NODE).getChildByName(c.LAYOUT),e=t.children||[];t.removeChild(e[e.length-1])},e.prototype.removeLastChild=function(t){var e=this.node.parent.parent.getChildByName(t).getChildByName(c.LAYOUT),n=e.children||[];e.removeChild(n[n.length-1])},e.prototype.childCount=function(t){return this.node.parent.parent.getChildByName(t).getChildByName(c.LAYOUT).children.length},r([l(cc.AudioClip)],e.prototype,"removeClip",void 0),e=r([i],e)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../common/scripts/util":void 0,"./add-button":"add-button","./blender":"blender"}]},{},["add-button","blender","remove-button"]);