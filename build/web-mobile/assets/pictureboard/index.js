window.__require=function t(e,n,o){function i(c,a){if(!n[c]){if(!e[c]){var u=c.split("/");if(u=u[u.length-1],!e[u]){var l="function"==typeof __require&&__require;if(!a&&l)return l(u,!0);if(r)return r(u,!0);throw new Error("Cannot find module '"+c+"'")}c=u}var p=n[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,n,o)}return n[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<o.length;c++)i(o[c]);return i}({pictureDrag:[function(t,e,n){"use strict";cc._RF.push(e,"a00fesqYxJBhYtbcmvTKakU","pictureDrag");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../common/scripts/drag"),c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.touchStartAnimation=function(){t.prototype.touchStartAnimation.call(this),this.node.zIndex=1,this.node.children[0].y=-15,this.node.x+=5},e.prototype.touchEndAnimation=function(){t.prototype.touchEndAnimation.call(this),this.node.children[0].y=-10,this.node.x-=5,this.node.zIndex=0},e.prototype.onTouchEnd=function(e){if(t.prototype.onTouchEnd.call(this,e),this.match)this.node.children[0].active=!1,this.node.emit("pictureMatch",this);else{var n=this.node.children[1],o=this.node.convertToWorldSpaceAR(cc.Vec2.ZERO),i=this.node.getPosition(),r=!1;o.x+n.width>cc.winSize.width?(i.x-=o.x+n.width-cc.winSize.width,r=!0):o.x<0&&(i.x-=o.x,r=!0),o.y+n.height>cc.winSize.height?(i.y-=o.y+n.height-cc.winSize.height,r=!0):o.y<0&&(i.y-=o.y,r=!0),r&&(new cc.Tween).target(this.node).to(.25,{position:i},{progress:null,easing:"sineOut"}).start(),this.node.emit("pictureNoMatch",this)}},e=i([a],e)}(r.default));n.default=u,cc._RF.pop()},{"../../../common/scripts/drag":void 0}],pictureDrop:[function(t,e,n){"use strict";cc._RF.push(e,"3db01KzXg9KFaQNUFIwPDP9","pictureDrop");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../common/scripts/drop"),c=cc._decorator,a=c.ccclass,u=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e=i([a],e)}(r.default));n.default=u,cc._RF.pop()},{"../../../common/scripts/drop":void 0}],pictureboard:[function(t,e,n){"use strict";cc._RF.push(e,"c2044giomlA94nwjPf3kUlG","pictureboard");var o=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,c=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(c=(r<3?i(c):r>3?i(e,n,c):i(e,n))||c);return r>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../common/scripts/drag"),c=t("../../../common/scripts/util"),a=t("../../../common/scripts/lib/config"),u=cc._decorator,l=u.ccclass,p=u.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pictureDrag=null,e.pictureDrop=null,e.truck=null,e.label=null,e.friendPos=null,e.truckInAudio=null,e.truckOutAudio=null,e.friend=null,e.numPieces=0,e.text=null,e.audio=null,e}return o(e,t),e.prototype.onLoad=function(){var t=this,e=a.default.getInstance();cc.director.getCollisionManager().enabled=!0,r.default.letDrag=!1,c.Util.loadFriend(function(e){t.friend=e.getComponent(dragonBones.ArmatureDisplay),t.friendPos.addChild(e),t.friend.playAnimation("face_eating",1)});var n=e.data[0],o=(n[0],n[1],n[2],n[3]),i=n[4],u=n[5],l=(n[6],n[7]);this.text=o,this.numPieces=parseInt(u),c.Util.loadTexture(i,function(e){null!=e&&(t.bg.spriteFrame=new cc.SpriteFrame(e),t.bg.node.position=new cc.Vec2(t.bg.node.x-t.bg.node.width/2,t.bg.node.y-t.bg.node.height))}),c.Util.loadGameSound(l,function(e){t.audio=e});for(var p=null,s=null,d=function(n){var o=e.data[0][8+4*n],i=e.data[0][9+4*n],u=e.data[0][10+4*n],l=cc.instantiate(f.pictureDrag);l.name=n.toString(),l.position=new cc.Vec2(parseInt(i)/3,parseInt(u)/3),a.default.i.direction===a.Direction.RTL&&(l.getComponent(r.default).isReverseXNeeded=!0),l.on("pictureMatch",f.onMatch.bind(f)),l.on("pictureNoMatch",function(){t.node.emit("wrong"),null!=t.friend&&t.friend.playAnimation("face_wrong",1)}),f.bg.node.addChild(l),c.Util.loadTexture(o,function(o){if(null!=o){var a=l.children[1],d=new cc.SpriteFrame(o);a.getComponent(cc.Sprite).spriteFrame=d;var f=l.children[0];f.getComponent(cc.Sprite).spriteFrame=d,f.active=!1,l.height=a.height,l.width=a.width,(new cc.Tween).target(l).delay(4).call(function(){f.active=!0}).to(.5,{position:new cc.Vec2(Math.random()*(802+(cc.winSize.width-802)/2)-(cc.winSize.width-802)/2,Math.random()*(432-cc.winSize.height)/4+(432-cc.winSize.height)/4)},{progress:null,easing:"backOut"}).call(function(){l.getComponent(r.default).allowDrag=!0,n+1==e.data.length&&(r.default.letDrag=!0,c.Util.showHelp(p,s))}).start();var h=cc.instantiate(t.pictureDrop);h.name=n.toString(),h.position=new cc.Vec2(parseInt(i)/3,parseInt(u)/3),h.height=l.height,h.width=l.width,t.bg.node.addChild(h),1==n&&(p=l,s=h)}})},f=this,h=0;h<this.numPieces;h++)d(h);var g=this.truck.x;a.default.i.direction===a.Direction.RTL?(this.truck.scaleX=-1,(new cc.Tween).target(this.truck).set({x:-cc.winSize.width}).call(function(){c.Util.playSfx(t.truckInAudio)}).to(3,{x:-g},{progress:null,easing:"quadOut"}).call(function(){t.truck.getComponent(cc.Animation).stop()}).start()):(new cc.Tween).target(this.truck).set({x:cc.winSize.width}).call(function(){c.Util.playSfx(t.truckInAudio)}).to(3,{x:g},{progress:null,easing:"quadOut"}).call(function(){t.truck.getComponent(cc.Animation).stop()}).start()},e.prototype.onMatch=function(){var t=this;this.node.emit("correct"),null!=this.friend&&this.friend.playAnimation("face_happy",1),--this.numPieces<=0&&(r.default.letDrag=!1,this.scheduleOnce(function(){t.label.string=t.text,a.default.i.direction===a.Direction.RTL&&(t.label.node.scaleX=-1),c.Util.speakClip(t.audio,function(){t.truck.getComponent(cc.Animation).play(),a.default.i.direction===a.Direction.RTL?(new cc.Tween).target(t.truck).call(function(){c.Util.playSfx(t.truckOutAudio)}).to(3,{x:2*cc.winSize.width},{progress:null,easing:"quadOut"}).call(function(){t.node.emit("nextProblem")}).start():(new cc.Tween).target(t.truck).call(function(){c.Util.playSfx(t.truckOutAudio)}).to(3,{x:2*-cc.winSize.width},{progress:null,easing:"quadOut"}).call(function(){t.node.emit("nextProblem")}).start()})},1))},i([p(cc.Prefab)],e.prototype,"pictureDrag",void 0),i([p(cc.Prefab)],e.prototype,"pictureDrop",void 0),i([p(cc.Sprite)],e.prototype,"bg",void 0),i([p(cc.Node)],e.prototype,"truck",void 0),i([p(cc.Label)],e.prototype,"label",void 0),i([p(cc.Node)],e.prototype,"friendPos",void 0),i([p(cc.AudioClip)],e.prototype,"truckInAudio",void 0),i([p(cc.AudioClip)],e.prototype,"truckOutAudio",void 0),e=i([l],e)}(cc.Component);n.default=s,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/util":void 0}]},{},["pictureDrag","pictureDrop","pictureboard"]);