window.__require=function t(e,r,n){function o(a,c){if(!r[a]){if(!e[a]){var u=a.split("/");if(u=u[u.length-1],!e[u]){var s="function"==typeof __require&&__require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+a+"'")}a=u}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){return o(e[a][1][t]||t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)o(n[a]);return o}({numbertrainDrag:[function(t,e,r){"use strict";cc._RF.push(e,"dcaa4SgbbtBZJfoUQLRl+uB","numbertrainDrag");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../../../common/scripts/drag"),a=cc._decorator,c=a.ccclass,u=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.num=null,e.numbertrain=null,e}return n(e,t),e.prototype.onTouchEnd=function(e){t.prototype.onTouchEnd.call(this,e),this.isDragging&&(this.match?this.numbertrain.emit("numbertrainMatch",this):this.numbertrain.emit("numbertrainNoMatch"))},o([u(cc.Label)],e.prototype,"num",void 0),o([u(cc.Node)],e.prototype,"numbertrain",void 0),e=o([c],e)}(i.default);r.default=s,cc._RF.pop()},{"../../../common/scripts/drag":void 0}],numbertrainDrop:[function(t,e,r){"use strict";cc._RF.push(e,"09812f4G5hIL6AbaR79Uoxg","numbertrainDrop");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../../../common/scripts/drop"),a=cc._decorator,c=a.ccclass,u=a.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wagonBase=null,e.order=1,e}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.wagonBase.scaleY=.5*this.order},o([u(cc.Node)],e.prototype,"wagonBase",void 0),o([u],e.prototype,"order",void 0),e=o([c],e)}(i.default);r.default=s,cc._RF.pop()},{"../../../common/scripts/drop":void 0}],ordertractor:[function(t,e,r){"use strict";cc._RF.push(e,"0bd5b3GLgBKOoj3SG3ZINoP","ordertractor");var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(r,"__esModule",{value:!0});var i=t("../../../common/scripts/util"),a=t("./numbertrainDrag"),c=t("../../../common/scripts/lib/config"),u=t("./numbertrainDrop"),s=t("../../../common/scripts/drag"),l=t("../../../common/scripts/lib/error-handler"),p=cc._decorator,d=p.ccclass,f=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.drag=null,e.outerDrop=null,e.choices=null,e.train=null,e.trainClip=null,e.metalClink=null,e.friendPos=null,e.friend=null,e.empty=0,e}return n(e,t),e.prototype.onLoad=function(){var t=this;cc.director.getCollisionManager().enabled=!0,s.default.letDrag=!1,i.Util.loadFriend(function(e){t.friend=e.getComponent(dragonBones.ArmatureDisplay),t.friendPos.addChild(e),t.friend.playAnimation("face_eating",1)}),this.node.on("numbertrainMatch",this.onMatch.bind(this)),this.node.on("numbertrainNoMatch",function(){t.node.emit("wrong"),null!=t.friend&&t.friend.playAnimation("face_wrong",1)});var e=c.default.getInstance().data[0],r=(e[0],e[1],e[2],e[3]),n="true"==e[4],o=this.generateNumbers(parseInt(r));n&&o.reverse(),this.empty=o.length;var l=null,p=null;o.forEach(function(e,r){var i=cc.instantiate(t.outerDrop),a=i.getChildByName("layout");if(null!=a){var c=a.getChildByName("drop");if(null!=c)c.name=e.toString(),c.getComponent(u.default).order=n?o.length-r:r+1,0==r&&(p=c)}var s=new cc.Node;s.width=i.width,s.height=i.height,s.addChild(i),t.train.addChild(s),(new cc.Tween).target(i).set({x:20*(r+1)}).delay(2).to(1,{x:0},{progress:null,easing:"sineIn"}).start()}),i.Util.shuffle(o),o.forEach(function(e){var r=cc.instantiate(t.drag);r.name=e.toString();var n=r.getComponent(a.default);n.num.string=e.toString(),n.numbertrain=t.node;var o=new cc.Node;o.width=r.width,o.height=r.height,o.addChild(r),t.choices.addChild(o),r.name==p.name&&(l=r)});var d=this.train.x;(new cc.Tween).target(this.train).call(function(){i.Util.playSfx(t.trainClip)}).set({x:d+cc.winSize.width}).to(3,{x:d},{progress:null,easing:"backOut"}).call(function(){i.Util.playSfx(t.metalClink)}).call(function(){s.default.letDrag=!0,i.Util.showHelp(l,p)}).start()},e.prototype.onMatch=function(){var t=this;this.node.emit("correct"),null!=this.friend&&this.friend.playAnimation("face_happy",1),--this.empty<=0&&(s.default.letDrag=!1,(new cc.Tween).target(this.train).delay(1).call(function(){i.Util.playSfx(t.trainClip)}).to(1,{x:this.train.x-cc.winSize.width},{progress:null,easing:"backIn"}).call(function(){t.node.emit("nextProblem")}).start())},e.prototype.generateNumbers=function(t){switch(t){case 1:return[1,2,3,4,5];case 2:return[6,7,8,9,10];case 3:return this.generateIncrementals(2,4);case 4:return[2,4,6,8,10];case 5:return this.generateRandoms(1,10);case 6:return this.generateIncrementals(11,16);case 7:return this.generateIncrementals(6,16);case 8:return this.generateRandoms(1,20);case 9:return this.generateIncrementals(10,12,2);case 10:return this.generateMultiples(3,1,20);case 11:return this.generateIncrementals(20,46);case 12:return this.generateMultiples(5,20,50);case 13:return this.generateMultiples(3,20,50);case 14:return this.generateMultiples(10,1,100);case 15:return this.generateRandoms(1,50);case 16:return this.generateIncrementals(60,96);case 17:return this.generateMultiples(5,1,100);case 18:return this.generateRandoms(60,100);default:return this.generateRandoms(1,100)}},e.prototype.generateIncrementals=function(t,e,r){void 0===r&&(r=1);var n=Math.floor(Math.random()*(e-t))+t;return[n,n+1*r,n+2*r,n+3*r,n+4*r]},e.prototype.generateMultiples=function(t,e,r){var n=Math.ceil(e/t),o=Math.floor(r/t)-4,i=Math.floor(Math.random()*(o-n))+n;return[i*t,(i+1)*t,(i+2)*t,(i+3)*t,(i+4)*t]},e.prototype.generateRandoms=function(t,e){for(var r=[],n=function(){var n=Math.floor(Math.random()*(e-t))+t;r.find(function(t){return t==n})!=n&&r.push(n)};r.length<5;)n();return r.sort(function(t,e){return t-e})},o([f(cc.Prefab)],e.prototype,"drag",void 0),o([f(cc.Prefab)],e.prototype,"outerDrop",void 0),o([f(cc.Node)],e.prototype,"choices",void 0),o([f(cc.Node)],e.prototype,"train",void 0),o([f(cc.AudioClip)],e.prototype,"trainClip",void 0),o([f(cc.AudioClip)],e.prototype,"metalClink",void 0),o([f(cc.Node)],e.prototype,"friendPos",void 0),o([l.default()],e.prototype,"onMatch",null),e=o([d],e)}(cc.Component);r.default=h,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./numbertrainDrag":"numbertrainDrag","./numbertrainDrop":"numbertrainDrop"}]},{},["numbertrainDrag","numbertrainDrop","ordertractor"]);