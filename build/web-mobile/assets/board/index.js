window.__require=function t(e,o,i){function n(c,a){if(!o[c]){if(!e[c]){var p=c.split("/");if(p=p[p.length-1],!e[p]){var s="function"==typeof __require&&__require;if(!a&&s)return s(p,!0);if(r)return r(p,!0);throw new Error("Cannot find module '"+c+"'")}c=p}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return n(e[c][1][t]||t)},l,l.exports,t,e,o,i)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<i.length;c++)n(i[c]);return n}({alphaDrag:[function(t,e,o){"use strict";cc._RF.push(e,"80ee4YIDgNNuKEhs9/f7oXY","alphaDrag");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/scripts/lib/config"),c=t("../../../common/scripts/util"),a=t("../../../common/scripts/drag"),p=cc._decorator,s=p.ccclass,l=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pos=0,e._soundClip=null,e}return i(e,t),e.prototype.onLoad=function(){var e=this;t.prototype.onLoad.call(this),"letterboard"==r.default.i.data[0][0]?c.Util.loadsLetter(this.node.name.toLowerCase(),function(t){e._soundClip=t}):c.Util.loadNumericSound(this.node.name,function(t){e._soundClip=t})},e.prototype.onTouchStart=function(e){if(t.prototype.onTouchStart.call(this,e),this.allowDrag&&null!=this._soundClip)try{this._soundClip&&c.Util.play(this._soundClip,!1)}catch(t){console.log("Failed playing sound")}},e.prototype.onTouchEnd=function(e){t.prototype.onTouchEnd.call(this,e),this.match?this.node.emit("alphaMatch",this):this.node.emit("alphaNoMatch")},e.prototype.onMatchOver=function(){t.prototype.onMatchOver.call(this),this.node.parent.color=cc.Color.WHITE,this.node.parent.opacity=255},e=n([s],e)}(a.default));o.default=l,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/util":void 0}],alphaDrop:[function(t,e,o){"use strict";cc._RF.push(e,"0afdbuIudJG17Ubeb9JdadQ","alphaDrop");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/scripts/drop"),c=cc._decorator,a=c.ccclass,p=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e=n([a],e)}(r.default));o.default=p,cc._RF.pop()},{"../../../common/scripts/drop":void 0}],board:[function(t,e,o){"use strict";cc._RF.push(e,"39a7exrKS9LEquIcYndlzb0","board");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r,c=t("./alphaDrag"),a=t("../../../common/scripts/lib/config"),p=t("./numberDisplay"),s=t("../../../common/scripts/util"),l=t("../../../common/scripts/lib/error-handler"),u=t("../../../common/scripts/drag"),h=cc._decorator,d=h.ccclass,f=h.property,g=["#5BC0EB","#FDE74C","#9BC53D","#55934","#A7921","#540D6E","#EE4266","#FFD23F","#3BCEAC","#0EAD69"];(function(t){t[t.Alpha=0]="Alpha",t[t.DropStickDragAlpha=1]="DropStickDragAlpha",t[t.DropAlphaDragStick=2]="DropAlphaDragStick"})(r||(r={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dropLayout=null,e.alphaDrag=null,e.alphaDrop=null,e.pos0=null,e.pos1=null,e.pos2=null,e.truck=null,e.friendPos=null,e.truckInClip=null,e.truckOutClip=null,e.friend=null,e.letters=null,e.positions=null,e.drags=[],e.currentIndex=0,e.dragPositions={},e.fontSize=0,e.lineHeight=0,e.type=null,e}return i(e,t),e.prototype.onLoad=function(){var t=this,e=a.default.getInstance();cc.director.getCollisionManager().enabled=!0,u.default.letDrag=!1,s.Util.loadFriend(function(e){t.friend=e.getComponent(dragonBones.ArmatureDisplay),t.friendPos.addChild(e),t.friend.playAnimation("laugh",1)});this.truck.x;a.default.i.direction==a.Direction.RTL?(this.truck.scaleX=-1,this.xpos=-this.truck.x,this.truck.x=-cc.winSize.width,this.pos0.x=-this.pos0.x,this.pos1.x=-this.pos1.x,this.pos2.x=-this.pos2.x):(this.xpos=this.truck.x,this.truck.x=cc.winSize.width),this.positions=[this.pos0,this.pos1,this.pos2],this.dropLayout.removeAllChildren();var o=e.data;this.letters=o[0][3].split(",");var i=this.dropLayout.getComponent(cc.Layout);i.paddingTop=parseInt(o[0][5]),i.paddingBottom=parseInt(o[0][6]),i.spacingX=parseInt(o[0][7]),i.spacingY=parseInt(o[0][8]),this.fontSize=parseInt(o[0][9]),this.lineHeight=parseInt(o[0][10]),"Alpha"==o[0][4]?(this.type=r.Alpha,this.letters.forEach(function(e){var o=cc.instantiate(t.alphaDrop);o.name=e,a.default.i.direction==a.Direction.RTL&&(o.scaleX=-1);var i=o.getComponent(cc.Label);i.string=e,i.fontSize=t.fontSize,i.lineHeight=t.lineHeight,t.dropLayout.addChild(o)})):"DropStickDragAlpha"==o[0][4]?(this.type=r.DropStickDragAlpha,this.letters.forEach(function(e){var o=cc.instantiate(t.imagePuzzleDrop);o.name=e,a.default.i.direction==a.Direction.RTL&&(o.scaleX=-1);var i=cc.instantiate(t.numberDisplay),n=i.getComponent(p.default);n.num=parseInt(e),n.type="Stick",o.getChildByName("imageglass_alphapuzzle").addChild(i),t.dropLayout.addChild(o)})):"DropAlphaDragStick"==o[0][4]&&(this.type=r.DropAlphaDragStick,this.letters.forEach(function(e){var o=cc.instantiate(t.imagePuzzleDrop);o.name=e,a.default.i.direction==a.Direction.RTL&&(o.scaleX=-1);var i=cc.instantiate(t.numberDisplay);i.color=(new cc.Color).fromHEX(g[Math.floor(Math.random()*g.length)]);var n=i.getComponent(p.default);n.type="Alpha",n.num=parseInt(e),n.fontSize=t.fontSize,n.lineHeight=t.lineHeight,o.getChildByName("imageglass_alphapuzzle").addChild(i),t.dropLayout.addChild(o)})),"y"==o[0][11]&&(this.letters=s.Util.shuffle(this.letters)),(new cc.Tween).target(this.truck).call(function(){s.Util.playSfx(t.truckInClip)}).to(1.5,{x:(this.truck.x+this.xpos)/2},{progress:null,easing:"quadOut"}).delay(.5).to(1.5,{x:this.xpos},{progress:null,easing:"quadIn"}).call(function(){t.truck.getComponent(cc.Animation).stop(),t.createDrag(0,0),t.createDrag(1,1),t.createDrag(2,2),t.scheduleOnce(function(){u.default.letDrag=!0},1)}).start()},e.prototype.onMatch=function(t){var e=this;if(this.node.emit("correct"),null!=this.friend&&this.friend.playAnimation("happy",1),1==this.drags.length){this.truck.getComponent(cc.Animation).play(),(new cc.Tween).target(this.truck).delay(1).call(function(){s.Util.playSfx(e.truckOutClip)}).to(3,{x:2*-cc.winSize.width},{progress:null,easing:"quadOut"}).call(function(){e.node.emit("nextProblem")}).start()}else{for(var o=t.pos;o<this.drags.length-1;o++){this.drags[o]=this.drags[o+1],(new cc.Tween).target(this.drags[o]).to(.5,{position:this.positions[o].position},{progress:null,easing:"backOut"}).start(),this.drags[o].position=this.positions[o].position,this.drags[o].children[0].getComponent(c.default).pos=o}++this.currentIndex<this.letters.length?this.createDrag(this.currentIndex,this.drags.length-1):this.drags.splice(this.drags.length-1,1)}},e.prototype.createDrag=function(t,e){var o=this,i=null;this.type==r.Alpha?i=this.createAlphaDrag(t):this.type==r.DropStickDragAlpha?i=this.createImageAlphaDrag(t):this.type==r.DropAlphaDragStick&&(i=this.createImageObjectDrag(t)),i.name=this.letters[t],i.on("alphaMatch",this.onMatch.bind(this)),i.on("alphaNoMatch",function(){o.node.emit("wrong"),null!=o.friend&&o.friend.playAnimation("sad",1)}),i.getComponent(c.default).pos=e;var n=new cc.Node;n.addChild(i),n.position=this.positions[e].position,this.node.addChild(n),this.drags[e]=n,this.currentIndex=t,(new cc.Tween).target(n).set({position:new cc.Vec2(this.positions[e].position.x,-cc.winSize.height)}).to(.5,{position:this.positions[e].position},{progress:null,easing:"backOut"}).call(function(){0==t&&s.Util.showHelp(i,o.dropLayout.getChildByName(i.name))}).start()},e.prototype.createAlphaDrag=function(t){var e=cc.instantiate(this.alphaDrag);e.color=(new cc.Color).fromHEX(g[Math.floor(Math.random()*g.length)]);var o=e.getComponent(cc.Label);return o.string=this.letters[t],o.fontSize=this.fontSize,o.lineHeight=this.lineHeight,e},e.prototype.createImageAlphaDrag=function(t){var e=cc.instantiate(this.imagePuzzleDrag),o=cc.instantiate(this.numberDisplay);o.color=(new cc.Color).fromHEX(g[Math.floor(Math.random()*g.length)]);var i=o.getComponent(p.default);return i.type="Alpha",i.num=parseInt(this.letters[t]),i.fontSize=this.fontSize,i.lineHeight=this.lineHeight,e.addChild(o),e},e.prototype.createImageObjectDrag=function(t){var e=cc.instantiate(this.imagePuzzleDrag),o=cc.instantiate(this.numberDisplay),i=o.getComponent(p.default);return i.type="Object",i.num=parseInt(this.letters[t]),e.addChild(o),e},n([f(cc.Node)],e.prototype,"dropLayout",void 0),n([f(cc.Prefab)],e.prototype,"alphaDrag",void 0),n([f(cc.Prefab)],e.prototype,"alphaDrop",void 0),n([f(cc.Prefab)],e.prototype,"imagePuzzleDrag",void 0),n([f(cc.Prefab)],e.prototype,"imagePuzzleDrop",void 0),n([f(cc.Prefab)],e.prototype,"numberDisplay",void 0),n([f(cc.Node)],e.prototype,"pos0",void 0),n([f(cc.Node)],e.prototype,"pos1",void 0),n([f(cc.Node)],e.prototype,"pos2",void 0),n([f(cc.Node)],e.prototype,"truck",void 0),n([f(cc.Node)],e.prototype,"friendPos",void 0),n([f(cc.AudioClip)],e.prototype,"truckInClip",void 0),n([f(cc.AudioClip)],e.prototype,"truckOutClip",void 0),n([l.default()],e.prototype,"onLoad",null),n([l.default()],e.prototype,"onMatch",null),n([l.default()],e.prototype,"createDrag",null),e=n([d],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../common/scripts/drag":void 0,"../../../common/scripts/lib/config":void 0,"../../../common/scripts/lib/error-handler":void 0,"../../../common/scripts/util":void 0,"./alphaDrag":"alphaDrag","./numberDisplay":"numberDisplay"}],numberDisplay:[function(t,e,o){"use strict";cc._RF.push(e,"d0dae0qgp5NMJHe3SoDzmOk","numberDisplay");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,c=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(c=(r<3?n(c):r>3?n(e,o,c):n(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/scripts/chimple-label"),c=cc._decorator,a=c.ccclass,p=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.num=null,e.type="Alpha",e.font=null,e.fontSize=null,e.lineHeight=null,e.stick=null,e.object1=null,e.object2=null,e.object3=null,e.object4=null,e.object5=null,e.object6=null,e.object7=null,e.object8=null,e.object9=null,e.object10=null,e}return i(e,t),e.prototype.onLoad=function(){if("Stick"==this.type){var t=this.getComponent(cc.Layout);this.num<=10&&(t.padding=10,t.spacingX=10);for(var e=0;e<this.num;e++){if(this.num>10&&e%5==0&&e%10!=0)(c=new cc.Node).width=4,this.node.addChild(c);(a=new cc.Node).addComponent(cc.Sprite).spriteFrame=this.stick,this.num>10&&(a.width=8),this.node.addChild(a)}}else if("Alpha"==this.type){var o=this.node.addComponent(r.default);o.font=this.font,o.fontSize=this.fontSize,o.lineHeight=this.lineHeight,o.string=this.num.toString()}else if("Object"==this.type){(t=this.getComponent(cc.Layout)).resizeMode=cc.Layout.ResizeMode.CHILDREN,this.num<=10?(t.paddingLeft=5,t.paddingTop=0,t.spacingX=5,t.spacingY=4,t.cellSize=cc.size(30,30)):(t.paddingLeft=5,t.paddingTop=0,t.spacingX=2,t.spacingY=5,t.cellSize=cc.size(19,19));var i=this["object"+Math.ceil(10*Math.random())];for(e=0;e<this.num;e++){if(10==e)for(var n=0;n<5;n++){var c=new cc.Node;this.node.addChild(c)}var a;(a=new cc.Node).addComponent(cc.Sprite).spriteFrame=i,this.num>10&&(a.width=8),this.node.addChild(a)}}},n([p],e.prototype,"num",void 0),n([p],e.prototype,"type",void 0),n([p(cc.Font)],e.prototype,"font",void 0),n([p],e.prototype,"fontSize",void 0),n([p],e.prototype,"lineHeight",void 0),n([p(cc.SpriteFrame)],e.prototype,"stick",void 0),n([p(cc.SpriteFrame)],e.prototype,"object1",void 0),n([p(cc.SpriteFrame)],e.prototype,"object2",void 0),n([p(cc.SpriteFrame)],e.prototype,"object3",void 0),n([p(cc.SpriteFrame)],e.prototype,"object4",void 0),n([p(cc.SpriteFrame)],e.prototype,"object5",void 0),n([p(cc.SpriteFrame)],e.prototype,"object6",void 0),n([p(cc.SpriteFrame)],e.prototype,"object7",void 0),n([p(cc.SpriteFrame)],e.prototype,"object8",void 0),n([p(cc.SpriteFrame)],e.prototype,"object9",void 0),n([p(cc.SpriteFrame)],e.prototype,"object10",void 0),e=n([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../common/scripts/chimple-label":void 0}]},{},["alphaDrag","alphaDrop","board","numberDisplay"]);